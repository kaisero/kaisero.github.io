<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>FTD Software Quality - Dependency Hell</title><meta name="Description" content=""><meta property="og:title" content="FTD Software Quality" />
<meta property="og:description" content="It has been over a year since the release of Firepower Threat Defense and due to some recent announcements I thought it would be a good time to take a look at current challenges we face with FTD and how Cisco is trying to get back on the track." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dependencyhell.net/2017-05-06-ftd-software-quality/" />
<meta property="article:published_time" content="2017-05-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-05-05T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="FTD Software Quality"/>
<meta name="twitter:description" content="It has been over a year since the release of Firepower Threat Defense and due to some recent announcements I thought it would be a good time to take a look at current challenges we face with FTD and how Cisco is trying to get back on the track."/>
<meta name="application-name" content="Dependency Hell">
<meta name="apple-mobile-web-app-title" content="Dependency Hell"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://dependencyhell.net/2017-05-06-ftd-software-quality/" /><link rel="prev" href="https://dependencyhell.net/2017-02-26-firepower-si/" /><link rel="next" href="https://dependencyhell.net/2017-05-27-anyconnect-for-ftd/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "FTD Software Quality",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/dependencyhell.net\/2017-05-06-ftd-software-quality\/"
        },"genre": "posts","keywords": "opinion","wordcount":  1249 ,
        "url": "https:\/\/dependencyhell.net\/2017-05-06-ftd-software-quality\/","datePublished": "2017-05-05T00:00:00+00:00","dateModified": "2017-05-05T00:00:00+00:00","author": {
                "@type": "Person",
                "name": "Oliver Kaiser"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Dependency Hell">Dependency Hell</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="Dependency Hell"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Dependency Hell">Dependency Hell</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="Dependency Hell">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">FTD Software Quality</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://dependencyhell.net" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Oliver Kaiser</a></span>&nbsp;<span class="post-category">included in <a href="/categories/firepower/"><i class="far fa-folder fa-fw"></i>firepower</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2017-05-05">2017-05-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1249 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;6 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#feature-parity">Feature Parity</a></li>
    <li><a href="#software-quality">Software Quality</a>
      <ul>
        <li><a href="#configuration-deployment">Configuration Deployment</a></li>
        <li><a href="#high-availability">High Availability</a></li>
        <li><a href="#user-identity">User Identity</a></li>
      </ul>
    </li>
    <li><a href="#future-direction">Future Direction</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>It has been over a year since the release of Firepower Threat Defense and due to some recent announcements I thought it would be a good time to take a look at current challenges we face with FTD and how Cisco is trying to get back on the track.</p>
<h2 id="feature-parity">Feature Parity</h2>
<p>One of the major reasons FTD has not been adopted (yet) is due to feature parity with ASA. In my opinion Cisco should have waited up until 2017 to release FTD since it was released with so many missing features that users felt like using a beta release that missed very important pieces that ASA was offering.This created some very ambitious roadmaps for FTD.</p>
<p>So what exactly was missing in the first FTD release?</p>
<ul>
<li>Site-to-Site VPN</li>
<li>Client-to-Site VPN (AnyConnect, SSLVPN)</li>
<li>Multiple Context Mode</li>
<li>Multicast Routing</li>
<li>Policy-based Routing</li>
<li>EIGRP, IS-IS Routing</li>
<li>BFD</li>
<li>Netflow Export</li>
<li>VxLAN</li>
<li>Modular Policy Framework</li>
<li>Inter-Chassis Clustering</li>
<li>On-box management</li>
<li>REST API</li>
<li>ASA Migration Utility</li>
</ul>
<p>This list is by far not complete but a very good overview of many important features that were missing at the initial release. So as of today where do we stand? Cisco was able to deliver some of the listed items but unfortunately there is still much to be done when it comes to feature parity and stability.</p>
<ul>
<li>Site-to-Site VPN - delivered with 6.1.0 (only between FTD devices), 6.2.0 introduced support to other vendors</li>
<li>Multicast Routing: delivered with 6.1.0 (PIM &amp; IGMP)</li>
<li>REST API: introduced with 6.1.0 (only a small list of CRUD operations supported)</li>
<li>ASA Migration Utility: introduced with 6.2.0</li>
<li>FlexConfig: Due to time constraints features like PBR, BFD, EIGRP, IS-IS, VxLAN, MPF and Netflow Export were introduced in 6.2.0 using FlexConfig. For anyone who ever used CSM - its basically writing CLI config in the FMC UI and pushing it to lina on an FTD device</li>
<li>On-box management: Cisco created a new UI (Firepower Device Manager) in 6.1 which includes only a subset of features compared to FMC. It is only recommended for small deployments ( &lt; ASA 5555-X) at the moment but be aware that many features are not working if you manage your device using FDM</li>
<li>ASA migration utility: Introduced with 6.2.0 (support to migrate ACLs, NAT and objects).</li>
<li>Inter-Chassis Clustering: Introduced with 6.2.0</li>
<li>Client-to-Site VPN: Will be introduced with 6.2.1 (May) for FP2000 appliances. All other platform will need to wait until summer</li>
<li>Multiple Context Mode: A high priority item on the roadmap without a definite release date</li>
</ul>
<p>Many features were delivered, but mostly with some drawbacks when in comes to configuration options (site-to-site vpn), manageability (flexconfig), feature parity (rest api, on-box management) and most importantly software quality.</p>
<h2 id="software-quality">Software Quality</h2>
<p>Cisco was very ambitious to satisfy the need for ASA feature parity but that ambition has lead to some very major software quality issues. At some point I have stopped counting how many cases I had to open for FTD. Most cases had to be escalated to engineering to either find a workaround or file a bug since the issue needed a hotfix. There was a variety of cases but lets just go over some examples that I found to be issues for many people out there.</p>
<h3 id="configuration-deployment">Configuration Deployment</h3>
<p>After you make any changes to a device specific configuration within FMC you will need to deploy your configuration. The deployment process is somewhat complicated since there are many moving parts in the background. First there is configuration that needs to be applied to the snort part of FTD which works mostly fine, but then there is also the lina (asa) configuration. After I encountered the first deployment issues I started troubleshooting and found that they re-used the CSM code to deploy configuration from FMC to the lina part of an FTD device. What the deployment process basically does is get information from the FMC database and create CLI commands that are dumped into lina for configuration using CSM. If the FMC dataset is corrupt or input validation has not been implemented correctly on FMC you will see the deployment process failing&hellip; and believe me, it happens a lot. If a line of configuration throws an error the deployment process will fail and do a rollback.</p>
<p>I have seen various reasons for the lina configuration deployment to fail and think most of them could have been avoided if there was just better input validation on FMC (e.g. you could configure syslog options in the platform settings but if they were pushed to an FTD device it did not accept them) and a better approach to interface with lina. The deployment process feels a lot like network automation without APIs, just dump some commands into a device, do some screen scraping and cross your fingers that it will work correctly.</p>
<h3 id="high-availability">High Availability</h3>
<p>Whenever you need to replace a FTD device within an HA pair you will need to break your HA and re-build it. Unfortunately this process is destined to fail. I have had many issues where HA could not be formed correctly, FMC just applied the HA config to one device and ignored the other one, or deployment straight out failed&hellip; Or the HA removal was only being applied to one of two devices. Now the primary was standalone without HA configuration and the secondary FW just became active, because the primary had its HA configuration removed&hellip; split brain at its best. :)</p>
<h3 id="user-identity">User Identity</h3>
<p>Actually this has nothing to do with FTD but just to showcase that its not just the FTD code that needs quality improvements I thought adding user identity as an example would be a good idea. I think I have seen nearly every possible issue possible when it comes to user identity. Lets just think of the scenario where you gather user information using ISE and then use pxGRID to interface with FMC. Problems that I have encountered so far include</p>
<ul>
<li>User:IP mapping updates not being pushed from ISE to FMC</li>
<li>User:IP mapping updates not being pushed from FMC to FTD</li>
<li>User database on FMC becoming corrupt, because the FMC data purge hasn&rsquo;t been implemented properly</li>
<li>pxGRID Failover on FMC to secondary pxGRID node not working</li>
<li>etc. etc.</li>
</ul>
<p>UPDATE 2017-07-27: In the last 6 months some major bugs considering ISE and Firepower have been fixed to enhance the stability of user identity (pxGRID failover, pxGRID consistency, etc.)</p>
<h2 id="future-direction">Future Direction</h2>
<p>I know some of this sounds like a big rant but don&rsquo;t get me wrong, there are some very good reasons to use firepower. The detection rate is top notch and the ability to drill down into events and use context to counter threats is something not many (or any) vendor can offer at the moment. Integration with the other products like ISE and AMP for Endpoints make the overall solution to so much more than just another middle box.</p>
<p>I have questioned a few times if Cisco was really committed to solve the current issues and it looks like they are finally getting the grip on this. During this weeks SEVT in San Jose they  recognized that these issues are very important and need to be fixed. The roadmap has been revamped to focus on code quality and fix current issues. To back this up they have openly talked about how they will adapt their internal practices, which was nice to see from a partners perspective.</p>
<p>Some major problem areas that are being addressed in the near future will probably include the following core features:</p>
<ul>
<li>Policy Deployment</li>
<li>FTD &amp; FMC HA</li>
<li>Clustering</li>
<li>Upgrades</li>
</ul></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2017-05-05</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://dependencyhell.net/2017-05-06-ftd-software-quality/" data-title="FTD Software Quality" data-via="https://twitter.com/xkaisero" data-hashtags="opinion"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://dependencyhell.net/2017-05-06-ftd-software-quality/"><i class="fab fa-linkedin fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/opinion/">opinion</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2017-02-26-firepower-si/" class="prev" rel="prev" title="Firepower Security Intelligence"><i class="fas fa-angle-left fa-fw"></i>Firepower Security Intelligence</a>
            <a href="/2017-05-27-anyconnect-for-ftd/" class="next" rel="next" title="AnyConnect for FTD">AnyConnect for FTD<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://dependencyhell.disqus.com/embed.js" defer></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-90912607-1', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-90912607-1" async></script></body>
</html>
